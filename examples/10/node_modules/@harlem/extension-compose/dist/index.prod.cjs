"use strict";var S=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var D=(e,t)=>{for(var s in t)S(e,s,{get:t[s],enumerable:!0})},N=(e,t,s,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of E(t))!A.call(e,r)&&r!==s&&S(e,r,{get:()=>t[r],enumerable:!(p=g(t,r))||p.enumerable});return e};var R=e=>N(S({},"__esModule",{value:!0}),e);var h={};D(h,{default:()=>x,useListeners:()=>y});module.exports=R(h);var d="extension:compose";var i=require("vue"),o=require("@harlem/utilities");function y(e){let t=[].concat((0,o.typeIsFunction)(e)?e():e);(0,i.onUnmounted)(()=>t.forEach(({dispose:s})=>s()))}function x(){return e=>{e.register("extensions","compose",()=>"No options specified");let{value:t,getNodes:s,resetNodes:p}=(0,o.objectTrace)();function r(u,m){u(t);let n=s(),l=m||`extension:compose:${(0,o.objectToPath)(["root",...n])}`,c=n.pop(),T=a=>(0,o.objectFromPath)(a,n);if(p(),(0,o.typeIsNil)(c))throw new Error("A valid property must be used");let f=()=>T(e.state)[c];return[f,a=>e.write(l,d,b=>{T(b)[c]=(0,o.typeIsFunction)(a)?a(f()):a})]}function V(u,m){let[n,l]=r(u,m);return(0,i.computed)({get:()=>n(),set:c=>l(c)})}return{useState:r,computeState:V,useListeners:y}}}0&&(module.exports={useListeners});
